<!DOCTYPE html>
<html>
<head>
<title>Bad Ed</title>
<script type="text/javascript" src="buffer.js"></script>
<script type="text/javascript" src="render.js"></script>
<script type="text/javascript" src="keyboard_controller.js"></script>
<style type="text/css">
body {
    white-space: pre;
    font-family: Menlo, Monaco, monospace;
}

.cursor {
    border: 1px solid black;
    margin: -1px;
}
</style>
</head>
<body>
<div class="terminal">
</div>
<script type="text/javascript">

var buffer = Buffer('')
var scrollState
var renderer = Renderer()
      .setLineWidth(80)
      .setScreenHeight(28)
      .setHorizontalScrollSensitivity(5)
      .setVerticalScrollSensitivity(5)

window.addEventListener('keydown', function(event) {
    event.preventDefault();
    buffer = keyboardController.handleKeyDown(event, buffer)

    var rendered = renderer(buffer, scrollState)
    document.body.innerHTML = rendered.html()
})

</script>
</body>
</html>
